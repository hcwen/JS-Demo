<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        *{margin: 0 ;padding: 0;list-style:none;}
        .transfer{width: 654px;margin: 50px auto 0;}
        .transfer ul, .transfer .btns{float: left;}
        .transfer ul{width: 300px;height: 400px;border: 1px solid #666;}
        .transfer ul li{line-height: 30px;padding-left: 10px;}
        .transfer ul li:hover{background: #efefef;}
        .transfer .btns{width: 50px; padding-top: 180px;}
        .transfer .btns button{display: block; width: 40px;margin: 0 auto;height: 20px;}
        .disabled{opacity: .4;}
    </style>
</head>
<body>
    <div class="transfer">
        <ul>
           <!-- <li>
               <label>
                   <input type="checkbox">
                   <span>内容</span>
               </label>
           </li> -->
        </ul>
            <div class = "btns">
                <button type="button" disabled  class="disabled">&gt;&gt;</button>
                <button type="button"  disabled class="disabled">&lt;&lt;</button>
            </div>
            <ul>
            </ul>
    </div>
</body>
</html>
<script>
    const data1 = ['1','2','3','4'];
    const data2 = ['5','6','7','8','9'];

    //1.初始化数值
    let aUl = document.querySelectorAll('.transfer ul');//获取所有的ul标签
    let aBtn =document.querySelectorAll('.transfer .btns button');//获取所有button标签

    fileData(data1,aUl[0],aBtn[0]);//调用函数，传输数组1，第一个ul标签，第一个button
    fileData(data2,aUl[1],aBtn[1]);//调用函数，传入数组2，第二个ul标签，第二个button

    function fileData(data,parent,btn){//创建函数
        
        let selectedCount = 0;//给复选框选中取消提供提示
        parent.innerHTML='';//在写入数据前清空数据

        for(let i=0;i<data.length;i++){//遍历数组
            let oLi = document.createElement('li');//创建li标签
            oLi.innerHTML=`
                <label>
                   <input type="checkbox">
                   <span>${data[i]}</span>
                </label>
            `//在li标签里写入内容
            parent.appendChild(oLi);//在ul标签里插入创建好的li标签

            let Ch = oLi.getElementsByTagName('input')[0];//获取获取Li标签里的input标签
            Ch.onclick=function (){//给input标签添加点击事件
                if(Ch.checked){//判断input复选框是否选中
                    selectedCount++;//复选框选中，数值+1
                }else{
                    selectedCount--;//复选框选中，数值-1
                }
                if(selectedCount>0){//数值大于0，表明复选框选中
                    btn.disabled=false;//disabled属性为禁用按钮，复选框选中时，将禁用按钮功能关闭。
                    btn.class='';//清空class属性，将css样式消除，从0.4透明到不透明。
                    console.log(selectedCount);
                }else{
                    btn.disabled=true;//disabled属性为禁用按钮，复选框没选中时，将禁用按钮功能开启
                    btn.class='disabled';//添加class属性，使用css样式，从不透明到透明
                    console.log(selectedCount);
                }
            }
        }
    }

    addClick(aBtn[0],aUl[0],aUl[1],data1,data2);//调用函数，传入第一个button，第一个ul，第二个ul，第一个数组，第二个数组
    addClick(aBtn[1],aUl[1],aUl[0],data2,data1);//调用函数，传入第二个button，第二个ul，第一个ul，第二个数组，第一个数组
    function addClick(btn,from,to,fromArr,toArr){
        btn.onclick=function(){//给button按钮添加点击事件
            let aCh = from.getElementsByTagName('input');//获取ul列表里的input标签

            for(let i=0;i<aCh.length;i++){//遍历input标签（因为getElementsByTagName返回的是一个集合，所以需要遍历才能使用）
                if(aCh[i].checked){//判断每一个input标签的复选框是否选中
                    aCh[i].checked =false;//如果复选框判断选中，那么则把选中的复选框取消选中
                    to.appendChild(aCh[i].parentNode.parentNode);//将选中的数据添加进另一个数组中，因为需要添加的是li，所以应该是input的父级标签label的父级标签li

                    let n = fromArr[i];//将转移到另一个数组的数据提取出来存放到n中。
                    fromArr.splice(i,1);//从提取出来的数据的那一位开始删除1位
                    toArr.push(n);//将数据转移到另一个数组中
                    i--;//i--是因为，没当数组中的数据提取出来并删除之后，后面的数据会向前推进一位，会导致下标为1的数据变为下标为0，而每次循环后都需要i++,此时会导致两者错开,不能相等，原下标为1变为0，而i则由0变为1，然后便会取到原本下标为2现在推进一位变为下标为1的数值
                }
             
            }   
                btn.disabled=true;//disabled属性为禁用按钮，在循环结束后，将禁用按钮功能开启
                btn.className='disabled';//在循环结束后，添加class属性，使用css样式，从不透明到透明

                fileData(data1,aUl[0],aBtn[0]);//当数据转移完成后重新绑定事件
                fileData(data2,aUl[1],aBtn[1]);//当数据转移完成后重新绑定事件
        }
    }
</script>